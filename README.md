# ğŸ® æ¸¸æˆä»£ç»ƒå¹³å°

ä¸€ä¸ªç±»ä¼¼ä»£ç»ƒé€šçš„æ¸¸æˆä»£ç»ƒå¹³å°å¾®ä¿¡å°ç¨‹åºï¼ŒåŸºäº **Taro + Next.js** æ„å»ºçš„å…¨æ ˆé¡¹ç›®ã€‚

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
negro-mp/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ mini/              # Taro å¾®ä¿¡å°ç¨‹åº
â”‚   â””â”€â”€ server/            # Next.js åç«¯ API
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ shared/            # å…±äº«ç±»å‹å’Œå·¥å…·å‡½æ•°
â”‚   â””â”€â”€ database/          # Prisma æ•°æ®åº“é…ç½®
â”œâ”€â”€ docker-compose.yml     # Docker éƒ¨ç½²é…ç½®
â”œâ”€â”€ Dockerfile             # Docker æ„å»ºæ–‡ä»¶
â””â”€â”€ package.json           # é¡¹ç›®æ ¹é…ç½®
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

> ğŸ“– **è¯¦ç»†æ­å»ºæŒ‡å—**ï¼šå¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡æ­å»ºé¡¹ç›®ï¼Œå»ºè®®å…ˆé˜…è¯» [SETUP.md](./SETUP.md) è·å–å®Œæ•´çš„æ­å»ºæ­¥éª¤å’Œæ•°æ®åº“é…ç½®è¯´æ˜ã€‚

### ç¯å¢ƒè¦æ±‚

- Node.js >= 18.0.0
- pnpm >= 8.0.0
- å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼ˆç”¨äºå°ç¨‹åºå¼€å‘ï¼‰

### å®‰è£…ä¾èµ–

```bash
# å®‰è£… pnpmï¼ˆå¦‚æœæ²¡æœ‰ï¼‰
npm install -g pnpm

# å®‰è£…é¡¹ç›®ä¾èµ–
pnpm install
```

### é…ç½®ç¯å¢ƒå˜é‡

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
# æ•°æ®åº“é…ç½®
DATABASE_URL="file:./dev.db"

# JWT å¯†é’¥
JWT_SECRET="your-super-secret-jwt-key-change-in-production"

# å¾®ä¿¡å°ç¨‹åºé…ç½®
WECHAT_APP_ID="your-wechat-app-id"
WECHAT_APP_SECRET="your-wechat-app-secret"
```

### åˆå§‹åŒ–æ•°æ®åº“

```bash
# ç”Ÿæˆ Prisma å®¢æˆ·ç«¯
pnpm db:generate

# æ¨é€æ•°æ®åº“ç»“æ„
pnpm db:push

# å¡«å……æµ‹è¯•æ•°æ®
pnpm --filter @negro/database seed
```

### å¯åŠ¨å¼€å‘æœåŠ¡

```bash
# å¯åŠ¨åç«¯ APIï¼ˆç«¯å£ 3000ï¼‰
pnpm dev:server

# å¯åŠ¨å°ç¨‹åºå¼€å‘ï¼ˆå¦ä¸€ä¸ªç»ˆç«¯ï¼‰
pnpm dev:mini
```

### å¾®ä¿¡å¼€å‘è€…å·¥å…·

1. æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·
2. å¯¼å…¥é¡¹ç›®ï¼Œé€‰æ‹© `apps/mini` ç›®å½•
3. å¡«å†™ä½ çš„å°ç¨‹åº AppID
4. å¼€å§‹è°ƒè¯•

## ğŸ› ï¸ æ ¸å¿ƒåŠŸèƒ½

### ç”¨æˆ·ç«¯ï¼ˆç©å®¶ï¼‰

- âœ… å¾®ä¿¡ä¸€é”®ç™»å½•
- âœ… æµè§ˆæ¸¸æˆåˆ—è¡¨
- âœ… å‘å¸ƒä»£ç»ƒè®¢å•
- âœ… æŸ¥çœ‹è®¢å•è¿›åº¦
- âœ… ç¡®è®¤è®¢å•å®Œæˆ
- âœ… è¯„ä»·ä»£ç»ƒå¸ˆ
- âœ… ä½™é¢ç®¡ç†

### ä»£ç»ƒå¸ˆç«¯

- âœ… ç”³è¯·æˆä¸ºä»£ç»ƒå¸ˆ
- âœ… æµè§ˆå¾…æ¥è®¢å•
- âœ… æ¥å•å¹¶å¼€å§‹ä»£ç»ƒ
- âœ… æ›´æ–°ä»£ç»ƒè¿›åº¦
- âœ… æäº¤å®Œæˆç¡®è®¤
- âœ… æŸ¥çœ‹æ”¶å…¥æ˜ç»†

### ç®¡ç†åŠŸèƒ½

- âœ… æ¸¸æˆåˆ†ç±»ç®¡ç†
- âœ… åŒºæœç®¡ç†
- âœ… ä»£ç»ƒç±»å‹é…ç½®
- âœ… è½®æ’­å›¾ç®¡ç†
- âœ… è®¢å•ç®¡ç†

## ğŸ“¡ API æ¥å£

### è®¤è¯ç›¸å…³

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| POST | `/api/auth/login` | å¾®ä¿¡ç™»å½• |

### ç”¨æˆ·ç›¸å…³

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/api/user/profile` | è·å–ç”¨æˆ·ä¿¡æ¯ |
| PUT | `/api/user/profile` | æ›´æ–°ç”¨æˆ·ä¿¡æ¯ |

### æ¸¸æˆç›¸å…³

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/api/games` | è·å–æ¸¸æˆåˆ—è¡¨ |
| GET | `/api/games/:id` | è·å–æ¸¸æˆè¯¦æƒ… |

### è®¢å•ç›¸å…³

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/api/orders` | è·å–è®¢å•åˆ—è¡¨ |
| POST | `/api/orders` | åˆ›å»ºè®¢å• |
| GET | `/api/orders/:id` | è·å–è®¢å•è¯¦æƒ… |
| POST | `/api/orders/:id/accept` | æ¥å• |
| POST | `/api/orders/:id/complete` | æäº¤å®Œæˆ |
| POST | `/api/orders/:id/confirm` | ç¡®è®¤å®Œæˆ |
| POST | `/api/orders/:id/cancel` | å–æ¶ˆè®¢å• |
| GET | `/api/orders/:id/progress` | è·å–è¿›åº¦ |
| POST | `/api/orders/:id/progress` | æ›´æ–°è¿›åº¦ |

### ä»£ç»ƒå¸ˆç›¸å…³

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/api/booster/apply` | è·å–ç”³è¯·çŠ¶æ€ |
| POST | `/api/booster/apply` | æäº¤ç”³è¯· |

### å…¶ä»–

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/api/banners` | è·å–è½®æ’­å›¾ |

## ğŸš¢ éƒ¨ç½²

### Vercel éƒ¨ç½²ï¼ˆæ¨èï¼‰

1. Fork æˆ– Clone é¡¹ç›®åˆ°ä½ çš„ GitHub
2. åœ¨ Vercel åˆ›å»ºæ–°é¡¹ç›®ï¼Œå¯¼å…¥ä»“åº“
3. è®¾ç½® Root Directory ä¸º `apps/server`
4. é…ç½®ç¯å¢ƒå˜é‡
5. éƒ¨ç½²

### Docker éƒ¨ç½²

```bash
# æ„å»ºå¹¶å¯åŠ¨
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

### ä¼ ç»ŸæœåŠ¡å™¨éƒ¨ç½²

```bash
# æ„å»ºé¡¹ç›®
pnpm build:server

# å¯åŠ¨ç”Ÿäº§æœåŠ¡
pnpm --filter @negro/server start
```

## ğŸ“± å°ç¨‹åºå‘å¸ƒ

1. åœ¨ `apps/mini/project.config.json` ä¸­å¡«å†™æ­£ç¡®çš„ AppID
2. ä¿®æ”¹ `apps/mini/config/index.ts` ä¸­çš„ç”Ÿäº§ç¯å¢ƒ API åœ°å€
3. æ„å»ºå°ç¨‹åºï¼š`pnpm build:mini`
4. ä½¿ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸Šä¼ ä»£ç 
5. åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°æäº¤å®¡æ ¸

## ğŸ”§ æŠ€æœ¯æ ˆ

### å‰ç«¯ï¼ˆå°ç¨‹åºï¼‰

- **Taro 3.6** - å¤šç«¯å¼€å‘æ¡†æ¶
- **React 18** - UI æ¡†æ¶
- **Zustand** - çŠ¶æ€ç®¡ç†
- **Sass** - CSS é¢„å¤„ç†å™¨
- **Taroify** - UI ç»„ä»¶åº“

### åç«¯

- **Next.js 14** - API Routes
- **Prisma** - ORM
- **SQLite/PostgreSQL** - æ•°æ®åº“
- **JWT** - èº«ä»½è®¤è¯
- **Zod** - æ•°æ®éªŒè¯

### å·¥å…·é“¾

- **pnpm** - åŒ…ç®¡ç†å™¨
- **TypeScript** - ç±»å‹ç³»ç»Ÿ
- **ESLint** - ä»£ç æ£€æŸ¥
- **Docker** - å®¹å™¨åŒ–éƒ¨ç½²

## ğŸ“„ License

MIT

---

Made with â¤ï¸ by Your Team

